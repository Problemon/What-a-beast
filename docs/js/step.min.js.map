{"version":3,"sources":["step.js"],"names":["showEndGame","backToElections","addClassHidden","removeClassHidden","hideOptions","steps","indexStep","level","rightAnswers","givenRightAnswers","getCurrentStep","this","querySelectorAll","getDataOfAnswer","element","image","closest","querySelector","src","title","currentStep","textContent","checkAnswer","givenAnswerOfStep","stepList","Number","value","dataOfAnswer","push","onStepListChange","buttonNext","classList","remove","onButtonNextClick","length","hideCurrentStep","showCurrentStep","onButtonBackClick","checked","add","buttonBack","addEventListener","once"],"mappings":"OAASA,gBAAmB,sBACnBC,oBAAuB,4BACvBC,eAAgBC,sBAAyB,uBACzCC,gBAAmB,mBAE5B,MAAMC,MAAQ,CACZC,UAAW,EACXC,MAAO,KACPC,aAAc,KACdC,kBAAmB,KAGnBC,iBAEE,OADAC,KAAKN,MAAQM,KAAKJ,MAAMK,iBAAiB,SAClCD,KAAKN,MAAMM,KAAKL,YAGzBO,gBAAgBC,GASd,MALmB,CACjBC,MAJeD,EAAQE,QAAQ,eACCC,cAAc,gBAAgBC,IAI9DC,MAHoBR,KAAKS,YAAYH,cAAc,gBAAgBI,cASvEC,cACEX,KAAKY,kBAAoBZ,KAAKa,SAASP,cAAc,iBAIrD,GAH0BN,KAAKH,aAAaG,KAAKL,aAClBmB,OAAOd,KAAKY,kBAAkBG,OAEX,CAChD,MAAMC,EAAehB,KAAKE,gBAAgBF,KAAKY,mBAC/CZ,KAAKF,kBAAkBmB,KAAKD,KAIhCE,mBACElB,KAAKmB,WAAWC,UAAUC,OAAO,mBAGnCC,oBACEtB,KAAKW,cAEDX,KAAKL,YAAcK,KAAKN,MAAM6B,OAAS,GACzC9B,cACAO,KAAKwB,kBACLnC,YAAYW,KAAKF,mBACjBE,KAAKL,UAAY,IAEjBK,KAAKwB,kBACLxB,KAAKL,WAAa,EAClBK,KAAKyB,oBAITC,oBACyB,IAAnB1B,KAAKL,UACPL,gBAAgBU,KAAKJ,QAErBI,KAAKwB,kBACLxB,KAAKL,WAAa,EAClBK,KAAKyB,oBAITD,kBACEjC,eAAeS,KAAKS,aACpBT,KAAKY,kBAAkBe,SAAU,EACjC3B,KAAKmB,WAAWC,UAAUQ,IAAI,mBAGhCH,kBACEzB,KAAKS,YAAcT,KAAKD,iBACxBC,KAAKmB,WAAanB,KAAKS,YAAYH,cAAc,uBACjDN,KAAK6B,WAAa7B,KAAKS,YAAYH,cAAc,uBACjDN,KAAKa,SAAWb,KAAKS,YAAYH,cAAc,eAE/Cd,kBAAkBQ,KAAKS,aAEvBT,KAAK6B,WAAWC,iBAAiB,SAAS,IAAM9B,KAAK0B,qBAAqB,CAACK,MAAM,IACjF/B,KAAKa,SAASiB,iBAAiB,UAAU,IAAM9B,KAAKkB,oBAAoB,CAACa,MAAM,IAC/E/B,KAAKmB,WAAWW,iBAAiB,SAAS,IAAM9B,KAAKsB,qBAAqB,CAACS,MAAM,aAI7ErC","file":"step.min.js","sourcesContent":["import { showEndGame } from './end.min.js';\nimport { backToElections } from './elections.min.js';\nimport { addClassHidden, removeClassHidden } from './util.min.js';\nimport { hideOptions } from './options.min.js';\n\nconst steps = {\n  indexStep: 0,\n  level: null, // get from level.js\n  rightAnswers: null, // get from level.js\n  givenRightAnswers: null, // get from level.js\n\n\n  getCurrentStep () {\n    this.steps = this.level.querySelectorAll('.step');\n    return this.steps[this.indexStep];\n  },\n\n  getDataOfAnswer(element) {\n    const stepItem = element.closest('.step__item');\n    const stepItemImageSrc = stepItem.querySelector('.step__image').src;\n    const stepTitleText = this.currentStep.querySelector('.step__title').textContent;\n    const answerData = {\n      image: stepItemImageSrc,\n      title: stepTitleText,\n    };\n\n    return answerData;\n  },\n\n  checkAnswer() {\n    this.givenAnswerOfStep = this.stepList.querySelector('input:checked');\n    const rightAnswerOfStep = this.rightAnswers[this.indexStep];\n    const givenAnswerOfStepValue = Number(this.givenAnswerOfStep.value);\n\n    if (rightAnswerOfStep === givenAnswerOfStepValue) {\n      const dataOfAnswer = this.getDataOfAnswer(this.givenAnswerOfStep);\n      this.givenRightAnswers.push(dataOfAnswer);\n    }\n  },\n\n  onStepListChange () {\n    this.buttonNext.classList.remove('button--hidden');\n  },\n\n  onButtonNextClick () {\n    this.checkAnswer();\n\n    if (this.indexStep === this.steps.length - 1) {\n      hideOptions();\n      this.hideCurrentStep();\n      showEndGame(this.givenRightAnswers);\n      this.indexStep = 0;\n    } else {\n      this.hideCurrentStep();\n      this.indexStep += 1;\n      this.showCurrentStep();\n    }\n  },\n\n  onButtonBackClick () {\n    if (this.indexStep === 0) {\n      backToElections(this.level);\n    } else {\n      this.hideCurrentStep();\n      this.indexStep -= 1;\n      this.showCurrentStep();\n    }\n  },\n\n  hideCurrentStep () {\n    addClassHidden(this.currentStep);\n    this.givenAnswerOfStep.checked = false;\n    this.buttonNext.classList.add('button--hidden');\n  },\n\n  showCurrentStep () {\n    this.currentStep = this.getCurrentStep();\n    this.buttonNext = this.currentStep.querySelector('.step__button--next');\n    this.buttonBack = this.currentStep.querySelector('.step__button--back');\n    this.stepList = this.currentStep.querySelector('.step__list');\n\n    removeClassHidden(this.currentStep);\n\n    this.buttonBack.addEventListener('click', () => this.onButtonBackClick(), {once: true});\n    this.stepList.addEventListener('change', () => this.onStepListChange(), {once: true});\n    this.buttonNext.addEventListener('click', () => this.onButtonNextClick(), {once: true});\n  },\n};\n\nexport {steps};\n"]}