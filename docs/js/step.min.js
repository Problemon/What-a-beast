import{showEndGame}from"./end.min.js";import{backToElections}from"./elections.min.js";import{addClassHidden,removeClassHidden}from"./util.min.js";import{hideOptions}from"./options.min.js";const steps={indexStep:0,level:null,rightAnswers:null,givenRightAnswers:null,getCurrentStep(){return this.steps=this.level.querySelectorAll(".step"),this.steps[this.indexStep]},getDataOfAnswer(t){return{image:t.closest(".step__item").querySelector(".step__image").src,title:this.currentStep.querySelector(".step__title").textContent}},checkAnswer(){this.givenAnswerOfStep=this.stepList.querySelector("input:checked");if(this.rightAnswers[this.indexStep]===Number(this.givenAnswerOfStep.value)){const t=this.getDataOfAnswer(this.givenAnswerOfStep);this.givenRightAnswers.push(t)}},onStepListChange(){this.buttonNext.classList.remove("button--hidden")},onButtonNextClick(){this.checkAnswer(),this.indexStep===this.steps.length-1?(hideOptions(),this.hideCurrentStep(),showEndGame(this.givenRightAnswers),this.indexStep=0):(this.hideCurrentStep(),this.indexStep+=1,this.showCurrentStep())},onButtonBackClick(){0===this.indexStep?backToElections(this.level):(this.hideCurrentStep(),this.indexStep-=1,this.showCurrentStep())},hideCurrentStep(){addClassHidden(this.currentStep),this.givenAnswerOfStep.checked=!1,this.buttonNext.classList.add("button--hidden")},showCurrentStep(){this.currentStep=this.getCurrentStep(),this.buttonNext=this.currentStep.querySelector(".step__button--next"),this.buttonBack=this.currentStep.querySelector(".step__button--back"),this.stepList=this.currentStep.querySelector(".step__list"),removeClassHidden(this.currentStep),this.buttonBack.addEventListener("click",(()=>this.onButtonBackClick()),{once:!0}),this.stepList.addEventListener("change",(()=>this.onStepListChange()),{once:!0}),this.buttonNext.addEventListener("click",(()=>this.onButtonNextClick()),{once:!0})}};export{steps};
//# sourceMappingURL=step.min.js.map
